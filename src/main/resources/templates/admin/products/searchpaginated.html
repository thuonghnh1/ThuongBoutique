<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>List of products</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="row mt-2 mb-2">
            <div class="col">
                <form th:action="@{/admin/products/searchpaginated}">
                    <div class="form-inline float-left">
                        <label for="name" class="mr-sm-2">Name:</label>
                        <input type="text" class="form-control" name="name" id="name" aria-describedby="helpId"
                            placeholder="Name">
                        <button class="btn btn-outline-primary ml-sm-2">Search</button>
                    </div>

                    <div class="float-right">
                        <a class="btn btn-outline-primary" th:href="@{/admin/products/add}"> Add New product</a>
                    </div>
                </form>
            </div>
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th>Product ID</th>
                    <th>Name</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr th:each=" product, iStat : ${productPage.content}">
                    <td scope="row">[[${product.productId}]]</td>
                    <td th:text="${product.name}"></td>
                    <td>
                        <a th:href="@{'/admin/products/view' +${product.productId}}"
                            class="btn btn-sm btn-info">View</a>
                        <a th:href="@{'/admin/products/edit/' +${product.productId}}"
                            class="btn btn-sm btn-success">Edit</a>
                        <a th:href="@{'/admin/products/delete/' + ${product.productId}}"
                            class="btn btn-sm btn-danger">Delete</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="card-footer text-muted">
            <form action="" class="d-flex align-items-center">
                <label for="size" class="form-label me-2">Page Size:</label>
                <select name="size" id="size" class="form-select w-auto me-2" onchange="this.form.submit()">
                    <option th:selected="${productPage.size == 5}" value="5">5</option>
                    <option th:selected="${productPage.size == 10}" value="10">10</option>
                    <option th:selected="${productPage.size == 15}" value="15">15</option>
                    <option th:selected="${productPage.size == 20}" value="20">20</option>
                    <option th:selected="${productPage.size == 30}" value="30">30</option>
                    <option th:selected="${productPage.size == 50}" value="50">50</option>
                </select>
            </form>

            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center mt-3">
                    <!-- First Page -->
                    <li th:class="1 == ${productPage.number + 1} ? 'page-item disabled' : 'page-item'">
                        <a th:href="@{/admin/products/searchpaginated(name=${name}, size=${productPage.size}, page=1)}"
                            class="page-link">First</a>
                    </li>

                    <!-- Previous Page -->
                    <li th:class="${productPage.number == 0} ? 'page-item disabled' : 'page-item'">
                        <a th:href="@{/admin/products/searchpaginated(name=${name}, size=${productPage.size}, page=${productPage.number})}"
                            class="page-link">Previous</a>
                    </li>

                    <!-- Page Numbers -->
                    <li th:each="pageNumber : ${#numbers.sequence(1, productPage.totalPages)}"
                        th:class="${pageNumber == productPage.number + 1} ? 'page-item active' : 'page-item'">
                        <a th:href="@{/admin/products/searchpaginated(name=${name}, size=${productPage.size}, page=${pageNumber})}"
                            class="page-link" th:text="${pageNumber}"></a>
                    </li>

                    <!-- Next Page -->
                    <li
                        th:class="${productPage.number + 1 == productPage.totalPages} ? 'page-item disabled' : 'page-item'">
                        <a th:href="@{/admin/products/searchpaginated(name=${name}, size=${productPage.size}, page=${productPage.number + 2})}"
                            class="page-link">Next</a>
                    </li>

                    <!-- Last Page -->
                    <li
                        th:class="${productPage.number + 1 == productPage.totalPages} ? 'page-item disabled' : 'page-item'">
                        <a th:href="@{/admin/products/searchpaginated(name=${name}, size=${productPage.size}, page=${productPage.totalPages})}"
                            class="page-link">Last</a>
                    </li>
                </ul>
            </nav>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>